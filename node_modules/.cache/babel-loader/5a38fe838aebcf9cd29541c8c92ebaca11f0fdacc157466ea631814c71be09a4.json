{"ast":null,"code":"import _toConsumableArray from\"/Users/amananand/Downloads/Personal Bookshelf/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/amananand/Downloads/Personal Bookshelf/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/amananand/Downloads/Personal Bookshelf/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/amananand/Downloads/Personal Bookshelf/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import SearchBar from'./SearchBar';import SearchResults from'./SearchResults';import CardSlider from'./CardSlider';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BookSearchPage=function BookSearchPage(_ref){var books=_ref.books,setBooks=_ref.setBooks,searched=_ref.searched,setSearched=_ref.setSearched,addToBookshelf=_ref.addToBookshelf;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var searchBooks=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(query){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(query.length===0)){_context.next=4;break;}setBooks([]);setSearched(false);return _context.abrupt(\"return\");case 4:setLoading(true);_context.next=7;return fetch(\"https://openlibrary.org/search.json?q=\".concat(query,\"&limit=10&page=1\"));case 7:response=_context.sent;_context.next=10;return response.json();case 10:data=_context.sent;setBooks(data.docs);setLoading(false);setSearched(true);// Set searched to true after search\ncase 14:case\"end\":return _context.stop();}},_callee);}));return function searchBooks(_x){return _ref2.apply(this,arguments);};}();useEffect(function(){var loadMoreBooks=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var currentPage,response,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!(loading||books.length===0)){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:currentPage=Math.floor(books.length/10)+1;_context2.next=5;return fetch(\"https://openlibrary.org/search.json?q=\".concat(books.query,\"&limit=10&page=\").concat(currentPage+1));case 5:response=_context2.sent;_context2.next=8;return response.json();case 8:data=_context2.sent;setBooks([].concat(_toConsumableArray(books),_toConsumableArray(data.docs)));case 10:case\"end\":return _context2.stop();}},_callee2);}));return function loadMoreBooks(){return _ref3.apply(this,arguments);};}();var handleScroll=function handleScroll(){if(window.innerHeight+document.documentElement.scrollTop>=document.documentElement.offsetHeight){loadMoreBooks();}};window.addEventListener('scroll',handleScroll);return function(){return window.removeEventListener('scroll',handleScroll);};},[books,loading,setBooks]);return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 bg-gradient-to-r from-cyan-500 to-blue-500 min-h-screen\",children:[/*#__PURE__*/_jsx(SearchBar,{onSearch:searchBooks}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loader\"})}):books.length>0?/*#__PURE__*/_jsx(SearchResults,{books:books,addToBookshelf:addToBookshelf}):searched?/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center mt-4 text-5xl\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No results found!!!\"})}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CardSlider,{category:\"Trending Books\"}),/*#__PURE__*/_jsx(CardSlider,{category:\"Classic Books\"}),/*#__PURE__*/_jsx(CardSlider,{category:\"Romance\"}),/*#__PURE__*/_jsx(CardSlider,{category:\"Kids\"}),/*#__PURE__*/_jsx(CardSlider,{category:\"Thrillers\"})]})]});};export default BookSearchPage;","map":{"version":3,"names":["React","useEffect","useState","SearchBar","SearchResults","CardSlider","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","BookSearchPage","_ref","books","setBooks","searched","setSearched","addToBookshelf","_useState","_useState2","_slicedToArray","loading","setLoading","searchBooks","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","query","response","data","wrap","_callee$","_context","prev","next","length","abrupt","fetch","concat","sent","json","docs","stop","_x","apply","arguments","loadMoreBooks","_ref3","_callee2","currentPage","_callee2$","_context2","Math","floor","_toConsumableArray","handleScroll","window","innerHeight","document","documentElement","scrollTop","offsetHeight","addEventListener","removeEventListener","className","children","onSearch","category"],"sources":["/Users/amananand/Downloads/Personal Bookshelf/src/components/BookSearchPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport SearchBar from './SearchBar';\nimport SearchResults from './SearchResults';\nimport CardSlider from './CardSlider';\n\nconst BookSearchPage = ({ books, setBooks, searched, setSearched, addToBookshelf }) => {\n  const [loading, setLoading] = useState(false);\n\n  const searchBooks = async (query) => {\n    if (query.length === 0) {\n      setBooks([]);\n      setSearched(false);\n      return;\n    }\n    setLoading(true);\n    const response = await fetch(`https://openlibrary.org/search.json?q=${query}&limit=10&page=1`);\n    const data = await response.json();\n    setBooks(data.docs);\n    setLoading(false);\n    setSearched(true); // Set searched to true after search\n  };\n\n  useEffect(() => {\n    const loadMoreBooks = async () => {\n      if (loading || books.length === 0) return;\n      const currentPage = Math.floor(books.length / 10) + 1;\n      const response = await fetch(`https://openlibrary.org/search.json?q=${books.query}&limit=10&page=${currentPage + 1}`);\n      const data = await response.json();\n      setBooks([...books, ...data.docs]);\n    };\n\n    const handleScroll = () => {\n      if (window.innerHeight + document.documentElement.scrollTop >= document.documentElement.offsetHeight) {\n        loadMoreBooks();\n      }\n    };\n\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [books, loading, setBooks]);\n\n  return (\n    <div className=\"p-4 bg-gradient-to-r from-cyan-500 to-blue-500 min-h-screen\">\n      <SearchBar onSearch={searchBooks} />\n      {loading ? (\n        <div className=\"flex justify-center items-center mt-4\">\n          <div className=\"loader\"></div>\n        </div>\n      ) : books.length > 0 ? (\n        <SearchResults books={books} addToBookshelf={addToBookshelf} />\n      ) : searched ? (\n        <div className=\"flex justify-center items-center mt-4 text-5xl\">\n          <p>No results found!!!</p>\n        </div>\n      ) : (\n        <>\n          <CardSlider category=\"Trending Books\" />\n          <CardSlider category=\"Classic Books\" />\n          <CardSlider category=\"Romance\" />\n          <CardSlider category=\"Kids\" />\n          <CardSlider category=\"Thrillers\" />\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default BookSearchPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}